<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
		<title>index</title>
		<link rel="icon" href="img/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body style="margin: 0;border: 0;">
<div id="app">
    <el-row >
        <el-col :span="4" :offset="18"><div style="text-align:right"><span >配置</span></div></el-col>
    </el-row>
    <el-row >
        <el-col :span="12" :offset="8"><div style="text-align:center"><span ><img src="img/logo.jpg" class="image"/></span></div></el-col>
    </el-row>
    <el-row>
    	<el-col :span="14" :offset="5">
    		<el-autocomplete  v-model="state4"  :fetch-suggestions="querySearchAsync"  placeholder="请输入dubbo application name" suffix-icon="el-icon-search" @select="handleSelect">
				<template slot-scope="{ item }">
					<div class="name">
						<span style="float: left">{{ item.applicationName }}{{ item.message }}</span>
						<span style="float: right; color: #8492a6; font-size: 13px">
							<el-badge class="item">
								<el-button size="small" >Jump to</el-button>

							</el-badge>
						</span>
					</div>
  				</template>
				<!--<el-button slot="append" icon="el-icon-search"><a href="download.html" style="color:black;text-decoration:none;">搜索</a></el-button>-->
			</el-autocomplete>
    	</el-col>
    </el-row>

</div>
<div>
	<span style="float: left; width: 250px;color: #8492a6; font-size: 13px">
		<el-input v-model="groupId" size="medium" placeholder="groupId"></el-input>
		<el-input v-model="artifactId" size="medium" placeholder="artifactId"></el-input>
	</span>
</div>
</body>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="js/axios.min.js"></script>
<script type="text/javascript">

    const vm = new Vue({
        el: '#app',
        data() {
			return {
				state4:'',
				restaurants: []
			};
        },
        created() {
            this.loadAll();
        },
    methods: {
      loadAll() {//从本地cookie中读取最近访问的
        return [{"applicationName":"java-jinrong-cashloan-web","groupId":"com.zbj.finance.cashloan","artifactId":"java-jinrong-cashloan-api",version:"1.0.18"}];
      },
      querySearchAsync(queryString, cb) {
          queryString ? this.createStateFilter(queryString,cb) : cb(this.restaurants);
      },
      createStateFilter(queryString,cb) {
			  axios.get('/index/search?artifactId='+queryString)
				  .then(response => {
				  		if(response.data.length>0){
			  cb(response.data);
		  				}else {
			  				result = [{message:"未搜索到结果请点击手动添加"}];
			  cb(result);
		 				 }
					  //cb(response.data);// callback返回数据
				  })
				  .catch(error => {
					  this.$message.error("异常");
				  });
      },
      handleSelect(item) {
		  urlParams="1=1";
		  if(item.applicationName){
			  urlParams = urlParams + "&applicationName="+item.applicationName;
		  }
		  if(item.groupId){
			  urlParams = urlParams + "&groupId="+item.groupId;
		  }
		  if(item.artifactId){
			  urlParams = urlParams + "&artifactId="+item.artifactId;
		  }
		  if(item.version){
			  urlParams = urlParams + "&version="+item.version;
		  }
			if(item.groupId && item.artifactId){
				urlParams = "/interface.html?"+urlParams;
			}else{
				urlParams = "/download.html?"+urlParams;
			}

		  console.log(item);
		  location.href = urlParams;
      }

    },
    mounted() {
      this.restaurants = this.loadAll();
    }
    })

</script>
<style>
	.el-col {
    border-radius: 4px;
	  padding: 20px 0;
    }
		
	.image {
    width: 60%;
		height: 60%;
    display: block;
  }
	<!-- 搜索框的高度 -->
	.el-autocomplete-suggestion__wrap {
    max-height: 200px;
	}
	.el-autocomplete{
		width: 100%;
	}

</style>
</html>