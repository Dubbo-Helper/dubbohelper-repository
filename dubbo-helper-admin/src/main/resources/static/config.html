<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<title>setup</title>
	</head>
	<body>
		<div id="app" style="margin:0 auto; width:320px; height:100px; border:1px">
			<el-row>
				<el-col :span="12" :offset="4" style="width: 500px">
						{{ message }}
				</el-col>
			</el-row>
			<el-row >
				<el-col :span="24" :offset="4" style="width: 500px">
					ZK：<el-input v-model="zkAddress" size="medium" placeholder="Example：192.168.1.100:2181"></el-input>
				</el-col>
			</el-row>
			<el-row >
				<el-col :span="24" :offset="4" style="width: 500px">
					Maven:<el-input v-model="repositoryUrl" size="medium" placeholder="Example：http://maven.test.com/repository/public/"></el-input>

				</el-col>
			</el-row>
			<el-row >
				<el-col :span="24">
					<a href="/">返回首页</a>
					<el-button @click="saveConfig">Save</el-button>

				</el-col>
			</el-row>
		</div>
		
	</body>
	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<script src="https://unpkg.com/vue-router/dist/vue-router.min.js"></script>
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	<script src="js/axios.min.js"></script>
	<script type="text/javascript">
        var router = new VueRouter({
            mode: 'history',
            routes: []
        });
	    const vm = new Vue({
            router,
	        el: '#app',
	        data: {
				zkAddress:"",
				repositoryUrl:"",
				message:"请根据环境情况配置以下两个参数"
	        },
	        created() {
                this.getConfig();
	        },
	        methods: {
                getConfig(){
                    axios.post('/config/get')
                        .then(response => {
						this.zkAddress = response.data.zkAddress;
					this.repositoryUrl = response.data.repositoryUrl;
                        })
                        .catch(error => {
                            this.$message.error("异常");
                        });
                },
				saveConfig(version){
					var config = {'zkAddress':this.zkAddress,'repositoryUrl':this.repositoryUrl};
					axios.post('/config/update',config)
							.then(response => {
						this.message= response.data;
				})
				.catch(error => {
						this.$message.error("异常");
				});
				}
			}
	    })
	</script>
	<style>
		.el-col {
		border-radius: 4px;
		padding: 20px 0;
		
		}
		 .el-row {
    margin-top: 20px;
    &:last-child {
      margin-bottom: 0;
    }
  }
  .el-col {
    border-radius: 20px;
  }	
  .bg-purple-dark {
    background: #99a9bf;
  }
	</style>	
</html>
